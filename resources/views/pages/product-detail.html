<!-- ========================================
     Product Detail Page - KHAIRAWANG DAIRY
     ======================================== -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="View product details - fresh dairy products from KHAIRAWANG DAIRY">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ¥›</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/resources/css/app.css">
  <script type="module" src="/resources/js/app.js"></script>
  <title>Fresh Farm Milk - KHAIRAWANG DAIRY</title>
  <style>[x-cloak] { display: none !important; }</style>
</head>
<body class="font-body text-dark-brown bg-cream antialiased" x-data>
  <!-- Header -->
  <header class="fixed top-0 left-0 right-0 z-50 bg-white shadow-soft-md">
    <div class="container-dairy">
      <nav class="flex items-center justify-between py-4">
        <a href="/" class="flex items-center gap-2 font-heading font-bold text-2xl text-dark-brown">
          <span class="text-3xl">ðŸ¥›</span>
          <span class="hidden sm:inline">KHAIRAWANG DAIRY</span>
        </a>
        <div class="hidden md:flex items-center gap-8">
          <a href="/" class="text-dark-brown hover:text-accent-orange font-medium">Home</a>
          <a href="/products" class="text-dark-brown hover:text-accent-orange font-medium">Products</a>
          <a href="/about" class="text-dark-brown hover:text-accent-orange font-medium">About</a>
          <a href="/contact" class="text-dark-brown hover:text-accent-orange font-medium">Contact</a>
        </div>
        <div class="flex items-center gap-3">
          <button @click="$store.search.open()" class="p-2 rounded-lg text-dark-brown hover:bg-dark-brown hover:bg-opacity-10" aria-label="Search">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
          </button>
          <button @click="$store.cart.toggle()" class="relative p-2 rounded-lg text-dark-brown hover:bg-dark-brown hover:bg-opacity-10" aria-label="Cart">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
            <span x-show="$store.cart.count > 0" x-text="$store.cart.count" x-transition class="absolute -top-1 -right-1 bg-accent-orange text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center"></span>
          </button>
        </div>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main id="main-content" class="pt-24 pb-16">
    <div class="container-dairy"
         x-data="gallery({
           images: [
             { src: 'https://images.unsplash.com/photo-1563636619-e9143da7973b?w=800', alt: 'Fresh Farm Milk - Main' },
             { src: 'https://images.unsplash.com/photo-1550583724-b2692b85b150?w=800', alt: 'Fresh Farm Milk - Side' },
             { src: 'https://images.unsplash.com/photo-1518462892829-c7c5f47f84d9?w=800', alt: 'Fresh Farm Milk - Pouring' }
           ]
         })">
      
      <!-- Breadcrumbs -->
      <nav class="mb-6" aria-label="Breadcrumb">
        <ol class="flex items-center gap-2 text-sm">
          <li><a href="/" class="text-gray-500 hover:text-accent-orange">Home</a></li>
          <li class="flex items-center gap-2">
            <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
            <a href="/products" class="text-gray-500 hover:text-accent-orange">Products</a>
          </li>
          <li class="flex items-center gap-2">
            <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
            <span class="text-dark-brown font-medium">Fresh Farm Milk</span>
          </li>
        </ol>
      </nav>

      <!-- Product Section -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12">
        <!-- Product Gallery -->
        <div class="space-y-4">
          <!-- Main Image -->
          <div class="relative bg-white rounded-2xl overflow-hidden shadow-soft aspect-square cursor-zoom-in"
               @click="openLightbox()">
            <img :src="activeImage.src || images[0].src" 
                 :alt="activeImage.alt || images[0].alt"
                 class="w-full h-full object-cover transition-transform duration-300"
                 :class="{ 'scale-110': isZoomed }"
                 @mousemove="handleZoomMove">
            <span class="badge badge-success absolute top-4 left-4">Fresh</span>
          </div>

          <!-- Thumbnails -->
          <div class="flex gap-3">
            <template x-for="(image, index) in images" :key="index">
              <button @click="select(index)"
                      class="w-20 h-20 rounded-xl overflow-hidden border-2 transition-colors"
                      :class="isActive(index) ? 'border-accent-orange' : 'border-transparent hover:border-gray-200'">
                <img :src="image.src" :alt="image.alt" class="w-full h-full object-cover">
              </button>
            </template>
          </div>
        </div>

        <!-- Product Info -->
        <div x-data="{ quantity: 1 }" class="space-y-6">
          <div>
            <p class="text-sm text-gray-500 uppercase tracking-wide mb-2">Milk</p>
            <h1 class="text-3xl md:text-4xl font-heading font-bold text-dark-brown mb-4">Fresh Farm Milk</h1>
            
            <!-- Rating -->
            <div class="flex items-center gap-2 mb-4">
              <div class="flex text-accent-orange">
                <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
              </div>
              <span class="text-sm text-gray-500">(128 reviews)</span>
            </div>

            <!-- Price -->
            <div class="flex items-center gap-3">
              <span class="text-3xl font-heading font-bold text-accent-orange">NPR 120</span>
              <span class="text-lg text-gray-400 line-through">NPR 150</span>
              <span class="badge badge-success">20% OFF</span>
            </div>
          </div>

          <p class="text-gray-600 leading-relaxed">
            Our farm-fresh milk is sourced from healthy, grass-fed cows and delivered to you within hours of milking. 
            Rich in natural proteins, calcium, and essential nutrients, this pure milk is perfect for drinking, 
            cooking, or making homemade dairy products.
          </p>

          <!-- Quantity & Add to Cart -->
          <div class="flex flex-wrap items-center gap-4">
            <div class="flex items-center border border-gray-200 rounded-xl overflow-hidden">
              <button @click="quantity = Math.max(1, quantity - 1)"
                      class="w-12 h-12 flex items-center justify-center text-gray-600 hover:bg-light-gray transition-colors">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg>
              </button>
              <input type="number" x-model="quantity" min="1" class="w-16 h-12 text-center border-x border-gray-200 font-medium focus:outline-none">
              <button @click="quantity++"
                      class="w-12 h-12 flex items-center justify-center text-gray-600 hover:bg-light-gray transition-colors">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
              </button>
            </div>
            <button @click="$store.cart.add({ id: 1, name: 'Fresh Farm Milk', price: 120, image: 'https://images.unsplash.com/photo-1563636619-e9143da7973b?w=600' }, quantity)"
                    class="btn btn-primary btn-lg flex-1">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
              Add to Cart
            </button>
          </div>

          <!-- Product Meta -->
          <div class="grid grid-cols-2 gap-4 pt-6 border-t border-gray-100">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 bg-light-gray rounded-lg flex items-center justify-center text-accent-orange">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path></svg>
              </div>
              <div><p class="text-xs text-gray-500">SKU</p><p class="font-medium text-dark-brown">KD-MLK-001</p></div>
            </div>
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 bg-light-gray rounded-lg flex items-center justify-center text-accent-orange">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
              </div>
              <div><p class="text-xs text-gray-500">Stock</p><p class="font-medium text-success-green">In Stock</p></div>
            </div>
          </div>

          <!-- Features -->
          <div class="space-y-3">
            <div class="flex items-center gap-3 text-sm">
              <svg class="w-5 h-5 text-success-green" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
              <span>100% Pure and Fresh</span>
            </div>
            <div class="flex items-center gap-3 text-sm">
              <svg class="w-5 h-5 text-success-green" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
              <span>Delivered within 24 hours</span>
            </div>
            <div class="flex items-center gap-3 text-sm">
              <svg class="w-5 h-5 text-success-green" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
              <span>Free delivery on orders above NPR 1000</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Product Tabs -->
      <div x-data="tabs({ defaultTab: 0 })" class="mt-16">
        <div class="border-b border-gray-200">
          <nav class="flex gap-8" role="tablist">
            <button @click="selectTab(0)" :class="isActive(0) ? 'border-accent-orange text-accent-orange' : 'border-transparent text-gray-500 hover:text-dark-brown'" class="py-4 border-b-2 font-medium transition-colors" role="tab">Description</button>
            <button @click="selectTab(1)" :class="isActive(1) ? 'border-accent-orange text-accent-orange' : 'border-transparent text-gray-500 hover:text-dark-brown'" class="py-4 border-b-2 font-medium transition-colors" role="tab">Nutrition Info</button>
            <button @click="selectTab(2)" :class="isActive(2) ? 'border-accent-orange text-accent-orange' : 'border-transparent text-gray-500 hover:text-dark-brown'" class="py-4 border-b-2 font-medium transition-colors" role="tab">Reviews (128)</button>
          </nav>
        </div>
        <div class="py-8">
          <div x-show="isActive(0)" role="tabpanel">
            <div class="prose max-w-none">
              <p>Our Fresh Farm Milk is sourced directly from our own dairy farm in the pristine hills of Khairawang, Nepal. Our cows are grass-fed and live in a stress-free environment, which contributes to the superior quality and taste of our milk.</p>
              <h4>Key Features:</h4>
              <ul>
                <li>100% pure and fresh, no preservatives added</li>
                <li>Rich in calcium, protein, and vitamins</li>
                <li>Sourced from grass-fed, healthy cows</li>
                <li>Delivered within 24 hours of milking</li>
                <li>Pasteurized for safety while retaining nutrition</li>
              </ul>
              <h4>Storage Instructions:</h4>
              <p>Store in refrigerator at 4Â°C or below. Once opened, consume within 3 days for best quality. Do not freeze.</p>
            </div>
          </div>
          <div x-show="isActive(1)" x-cloak role="tabpanel">
            <div class="max-w-md">
              <h4 class="font-heading font-semibold text-dark-brown mb-4">Nutrition Facts (per 100ml)</h4>
              <table class="w-full text-sm">
                <tbody class="divide-y divide-gray-100">
                  <tr><td class="py-2 text-gray-500">Energy</td><td class="py-2 font-medium text-dark-brown text-right">61 kcal</td></tr>
                  <tr><td class="py-2 text-gray-500">Protein</td><td class="py-2 font-medium text-dark-brown text-right">3.2g</td></tr>
                  <tr><td class="py-2 text-gray-500">Fat</td><td class="py-2 font-medium text-dark-brown text-right">3.6g</td></tr>
                  <tr><td class="py-2 text-gray-500">Carbohydrates</td><td class="py-2 font-medium text-dark-brown text-right">4.8g</td></tr>
                  <tr><td class="py-2 text-gray-500">Calcium</td><td class="py-2 font-medium text-dark-brown text-right">120mg</td></tr>
                  <tr><td class="py-2 text-gray-500">Vitamin D</td><td class="py-2 font-medium text-dark-brown text-right">1.0Âµg</td></tr>
                </tbody>
              </table>
            </div>
          </div>
          <div x-show="isActive(2)" x-cloak role="tabpanel">
            <div class="space-y-6">
              <div class="flex gap-4">
                <div class="w-12 h-12 bg-accent-orange rounded-full flex items-center justify-center text-white font-bold">R</div>
                <div class="flex-1">
                  <div class="flex items-center gap-2 mb-1">
                    <span class="font-semibold text-dark-brown">Ramesh K.</span>
                    <div class="flex text-accent-orange text-sm">â˜…â˜…â˜…â˜…â˜…</div>
                  </div>
                  <p class="text-gray-600 text-sm">Best milk I've ever tasted! Fresh and creamy, just like milk from my grandmother's farm. Highly recommend!</p>
                </div>
              </div>
              <div class="flex gap-4">
                <div class="w-12 h-12 bg-success-green rounded-full flex items-center justify-center text-white font-bold">S</div>
                <div class="flex-1">
                  <div class="flex items-center gap-2 mb-1">
                    <span class="font-semibold text-dark-brown">Sunita M.</span>
                    <div class="flex text-accent-orange text-sm">â˜…â˜…â˜…â˜…â˜…</div>
                  </div>
                  <p class="text-gray-600 text-sm">My kids love this milk. It's so fresh and tastes nothing like the packaged milk from supermarkets. Will order again!</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-bottom"><div class="container-dairy"><div class="footer-bottom-content"><p class="footer-copyright">&copy; 2024 KHAIRAWANG DAIRY. All rights reserved.</p></div></div></div>
  </footer>

  <!-- Cart Drawer -->
  <div x-show="$store.cart.isOpen" x-cloak class="fixed inset-0 z-50 overflow-hidden">
    <div x-show="$store.cart.isOpen" x-transition @click="$store.cart.close()" class="fixed inset-0 bg-dark-brown bg-opacity-50 backdrop-blur-sm"></div>
    <div class="fixed inset-y-0 right-0 max-w-full flex">
      <div x-show="$store.cart.isOpen" x-transition class="w-screen max-w-md">
        <div class="h-full flex flex-col bg-white shadow-xl">
          <div class="flex items-center justify-between px-6 py-4 border-b border-gray-100">
            <h2 class="text-xl font-heading font-semibold text-dark-brown">Shopping Cart</h2>
            <button @click="$store.cart.close()" class="p-2 text-gray-400 hover:text-dark-brown rounded-lg"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
          </div>
          <div class="flex-1 overflow-y-auto px-6 py-4">
            <div x-show="$store.cart.isEmpty" class="text-center py-12">
              <h3 class="text-lg font-semibold text-dark-brown mb-2">Your cart is empty</h3>
              <button @click="$store.cart.close()" class="btn btn-primary">Start Shopping</button>
            </div>
            <ul x-show="!$store.cart.isEmpty" class="space-y-4">
              <template x-for="(item, index) in $store.cart.items" :key="item.id">
                <li class="flex gap-4 p-4 bg-light-gray rounded-xl">
                  <div class="flex-shrink-0 w-20 h-20 bg-white rounded-lg overflow-hidden"><img :src="item.image" :alt="item.name" class="w-full h-full object-cover"></div>
                  <div class="flex-1 min-w-0">
                    <h3 class="font-semibold text-dark-brown truncate" x-text="item.name"></h3>
                    <p class="text-accent-orange font-bold mt-1">NPR <span x-text="item.price"></span></p>
                    <div class="flex items-center gap-2 mt-2">
                      <button @click="$store.cart.decrement(index)" class="w-8 h-8 rounded-lg border border-gray-200 flex items-center justify-center"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg></button>
                      <span class="w-8 text-center font-medium" x-text="item.quantity"></span>
                      <button @click="$store.cart.increment(index)" class="w-8 h-8 rounded-lg border border-gray-200 flex items-center justify-center"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></button>
                    </div>
                  </div>
                  <button @click="$store.cart.remove(index)" class="flex-shrink-0 p-2 text-gray-400 hover:text-error-red"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button>
                </li>
              </template>
            </ul>
          </div>
          <div x-show="!$store.cart.isEmpty" class="border-t border-gray-100 px-6 py-4 space-y-4">
            <div class="flex justify-between text-lg font-semibold"><span class="text-dark-brown">Total</span><span class="text-accent-orange" x-text="$store.cart.formattedTotal"></span></div>
            <a href="/checkout" class="btn btn-primary w-full justify-center">Proceed to Checkout</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Notifications -->
  <div class="fixed bottom-4 right-4 z-50 space-y-2">
    <template x-for="toast in $store.toast.toasts" :key="toast.id">
      <div x-show="toast.visible" x-transition :class="$store.toast.getColorClasses(toast.type)" class="flex items-center gap-3 px-4 py-3 rounded-xl shadow-soft-lg min-w-[280px] max-w-sm">
        <span x-html="$store.toast.getIcon(toast.type)"></span>
        <span x-text="toast.message" class="flex-1 text-sm font-medium"></span>
        <button @click="$store.toast.dismiss(toast.id)" class="flex-shrink-0 opacity-80 hover:opacity-100"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
      </div>
    </template>
  </div>
</body>
</html>
